<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tireshoppingmall.home.board.BoardMapper">
	<select id="getAskCount" resultType="java.lang.Integer">
		select count(*)
        from ask, ask_account
        where a_owner_fk = aa_id
	</select>
	<select id="getAskAll" resultType="com.tireshoppingmall.home.board.AskDTO">
		select *
        from (
			select	rownum as rownumber,
					a_number,
					a_sortation,
					a_title,
					a_date,
					a_status
			from (
				select *
				from ask, ask_account
				where a_owner_fk = aa_id
				order by a_date desc
			)
        )
        where rownumber &gt;= #{begin} and rownumber &lt;= #{last}
	</select>
	<select id="getAskOne" resultType="com.tireshoppingmall.home.board.AskDTO">
		select *
		from ask
		where a_number = #{a_number}
	</select>
	<select id="getAskReply" resultType="com.tireshoppingmall.home.board.AskReplyDTO">
	 	select *
	 	from ask_reply
	 	where ar_number_fk = #{a_number}
	</select>
	<insert id="createAsk">
		insert
		into ask
		values(
			ask_seq.nextval,
			'id',
			#{a_sortation},
			#{a_title},
			#{a_text},
			sysdate,
			'답변대기'
		)
	</insert>
	<update id="updateAsk">
		update
		ask
		set	a_sortation = #{a_sortation},
			a_title = #{a_title},
			a_text = #{a_text}
		where a_number = #{a_number}
	</update>
	<delete id="deleteAsk">
		delete
		ask
		where a_number = #{a_number}
	</delete>
</mapper>